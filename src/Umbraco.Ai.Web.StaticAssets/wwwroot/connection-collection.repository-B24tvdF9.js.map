{"version":3,"file":"connection-collection.repository-B24tvdF9.js","sources":["../Client/src/connection/repository/collection/connection-collection.server.data-source.ts","../Client/src/connection/repository/collection/connection-collection.repository.ts"],"sourcesContent":["import type { UmbControllerHost } from \"@umbraco-cms/backoffice/controller-api\";\r\nimport type { UmbCollectionDataSource, UmbCollectionFilterModel } from \"@umbraco-cms/backoffice/collection\";\r\nimport { tryExecuteAndNotify } from \"@umbraco-cms/backoffice/resources\";\r\nimport { ConnectionsService } from \"../../../api/sdk.gen.js\";\r\nimport { UaiConnectionTypeMapper } from \"../../type-mapper.js\";\r\nimport type { UaiConnectionItemModel } from \"../../types.js\";\r\n\r\n/**\r\n * Server data source for Connection collection operations.\r\n */\r\nexport class UaiConnectionCollectionServerDataSource implements UmbCollectionDataSource<UaiConnectionItemModel> {\r\n    #host: UmbControllerHost;\r\n\r\n    constructor(host: UmbControllerHost) {\r\n        this.#host = host;\r\n    }\r\n\r\n    /**\r\n     * Gets all connections as collection items.\r\n     */\r\n    async getCollection(filter: UmbCollectionFilterModel) {\r\n        const { data, error } = await tryExecuteAndNotify(\r\n            this.#host,\r\n            ConnectionsService.getConnections({\r\n                query: {\r\n                    skip: filter.skip ?? 0,\r\n                    take: filter.take ?? 100,\r\n                },\r\n            })\r\n        );\r\n\r\n        if (error || !data) {\r\n            return { error };\r\n        }\r\n\r\n        const items = data.items.map(UaiConnectionTypeMapper.toItemModel);\r\n\r\n        return {\r\n            data: {\r\n                items,\r\n                total: data.total,\r\n            },\r\n        };\r\n    }\r\n}\r\n","import type { UmbCollectionFilterModel, UmbCollectionRepository } from \"@umbraco-cms/backoffice/collection\";\r\nimport type { UmbControllerHost } from \"@umbraco-cms/backoffice/controller-api\";\r\nimport { UmbRepositoryBase } from \"@umbraco-cms/backoffice/repository\";\r\nimport { UaiConnectionCollectionServerDataSource } from \"./connection-collection.server.data-source.js\";\r\n\r\n/**\r\n * Repository for Connection collection operations.\r\n */\r\nexport class UaiConnectionCollectionRepository extends UmbRepositoryBase implements UmbCollectionRepository {\r\n    #collectionSource: UaiConnectionCollectionServerDataSource;\r\n\r\n    constructor(host: UmbControllerHost) {\r\n        super(host);\r\n        this.#collectionSource = new UaiConnectionCollectionServerDataSource(host);\r\n    }\r\n\r\n    async requestCollection(filter: UmbCollectionFilterModel) {\r\n        return this.#collectionSource.getCollection(filter);\r\n    }\r\n}\r\n\r\nexport { UaiConnectionCollectionRepository as api };\r\n"],"names":["UaiConnectionCollectionServerDataSource","#host","host","filter","data","error","tryExecuteAndNotify","ConnectionsService","UaiConnectionTypeMapper","UaiConnectionCollectionRepository","UmbRepositoryBase","#collectionSource"],"mappings":";;;AAUO,MAAMA,EAAmG;AAAA,EAC5GC;AAAA,EAEA,YAAYC,GAAyB;AACjC,SAAKD,KAAQC;AAAA,EACjB;AAAA;AAAA;AAAA;AAAA,EAKA,MAAM,cAAcC,GAAkC;AAClD,UAAM,EAAE,MAAAC,GAAM,OAAAC,EAAA,IAAU,MAAMC;AAAA,MAC1B,KAAKL;AAAA,MACLM,EAAmB,eAAe;AAAA,QAC9B,OAAO;AAAA,UACH,MAAMJ,EAAO,QAAQ;AAAA,UACrB,MAAMA,EAAO,QAAQ;AAAA,QAAA;AAAA,MACzB,CACH;AAAA,IAAA;AAGL,WAAIE,KAAS,CAACD,IACH,EAAE,OAAAC,EAAA,IAKN;AAAA,MACH,MAAM;AAAA,QACF,OAJMD,EAAK,MAAM,IAAII,EAAwB,WAAW;AAAA,QAKxD,OAAOJ,EAAK;AAAA,MAAA;AAAA,IAChB;AAAA,EAER;AACJ;ACpCO,MAAMK,UAA0CC,EAAqD;AAAA,EACxGC;AAAA,EAEA,YAAYT,GAAyB;AACjC,UAAMA,CAAI,GACV,KAAKS,KAAoB,IAAIX,EAAwCE,CAAI;AAAA,EAC7E;AAAA,EAEA,MAAM,kBAAkBC,GAAkC;AACtD,WAAO,KAAKQ,GAAkB,cAAcR,CAAM;AAAA,EACtD;AACJ;"}