{"version":3,"file":"connection-details.element-Dvtpfcim.js","sources":["../Client/src/core/command/command.base.ts","../Client/src/core/command/implement/partial-update.command.ts","../Client/src/connection/views/connection-details.element.ts"],"sourcesContent":["export interface UaiCommand {\r\n    correlationId?: string;\r\n    execute(receiver: unknown): void;\r\n}\r\n\r\nexport abstract class UaiCommandBase<TReceiver> implements UaiCommand {\r\n    correlationId?: string;\r\n\r\n    constructor(correlationId?: string) {\r\n        this.correlationId = correlationId;\r\n    }\r\n\r\n    abstract execute(receiver: TReceiver): void;\r\n}\r\n","import { UaiCommandBase } from \"../command.base.js\";\r\n\r\nexport class UaiPartialUpdateCommand<TReceiver> extends UaiCommandBase<TReceiver> {\r\n    #partial: Partial<TReceiver>;\r\n\r\n    constructor(partial: Partial<TReceiver>, correlationId?: string) {\r\n        super(correlationId);\r\n        this.#partial = partial;\r\n    }\r\n\r\n    execute(receiver: TReceiver) {\r\n        Object.keys(this.#partial)\r\n            .filter(key => this.#partial[key as keyof TReceiver] !== undefined)\r\n            .forEach(key => {\r\n                receiver[key as keyof TReceiver] = this.#partial[key as keyof TReceiver]!;\r\n            });\r\n    }\r\n}\r\n","import { css, html, customElement, state } from \"@umbraco-cms/backoffice/external/lit\";\r\nimport { UmbLitElement } from \"@umbraco-cms/backoffice/lit-element\";\r\nimport { UmbTextStyles } from \"@umbraco-cms/backoffice/style\";\r\nimport type { UaiConnectionDetailModel } from \"../types.js\";\r\nimport { UaiPartialUpdateCommand } from \"../../core/command/implement/partial-update.command.js\";\r\nimport { UAI_CONNECTION_WORKSPACE_CONTEXT } from \"../workspace/connection-workspace.context.js\";\r\n\r\n/**\r\n * Workspace view for Connection details.\r\n * Displays provider selection, settings, and active toggle.\r\n */\r\n@customElement(\"uai-connection-details\")\r\nexport class UaiConnectionDetailsElement extends UmbLitElement {\r\n    #workspaceContext?: typeof UAI_CONNECTION_WORKSPACE_CONTEXT.TYPE;\r\n\r\n    @state()\r\n    private _model?: UaiConnectionDetailModel;\r\n\r\n    @state()\r\n    private _isNew?: boolean;\r\n\r\n    constructor() {\r\n        super();\r\n        this.consumeContext(UAI_CONNECTION_WORKSPACE_CONTEXT, (context) => {\r\n            if (context) {\r\n                this.#workspaceContext = context;\r\n                this.observe(context.model, (model) => (this._model = model));\r\n                this.observe(context.isNew, (isNew) => (this._isNew = isNew));\r\n            }\r\n        });\r\n    }\r\n\r\n    #onProviderChange(event: Event) {\r\n        event.stopPropagation();\r\n        const target = event.target as HTMLInputElement;\r\n        this.#workspaceContext?.handleCommand(\r\n            new UaiPartialUpdateCommand<UaiConnectionDetailModel>({ providerId: target.value }, \"providerId\")\r\n        );\r\n    }\r\n\r\n    #onActiveChange(event: Event) {\r\n        event.stopPropagation();\r\n        const target = event.target as HTMLInputElement;\r\n        this.#workspaceContext?.handleCommand(\r\n            new UaiPartialUpdateCommand<UaiConnectionDetailModel>({ isActive: target.checked }, \"isActive\")\r\n        );\r\n    }\r\n\r\n    render() {\r\n        if (!this._model) return html`<uui-loader></uui-loader>`;\r\n\r\n        return html`\r\n            <uui-box headline=\"Connection Details\">\r\n                <umb-property-layout label=\"Provider\" description=\"AI provider for this connection\">\r\n                    <uui-input\r\n                        slot=\"editor\"\r\n                        .value=${this._model.providerId}\r\n                        @change=${this.#onProviderChange}\r\n                        placeholder=\"e.g., openai\"\r\n                        ?disabled=${!this._isNew}\r\n                    ></uui-input>\r\n                </umb-property-layout>\r\n\r\n                <umb-property-layout label=\"Active\" description=\"Enable or disable this connection\">\r\n                    <uui-toggle slot=\"editor\" .checked=${this._model.isActive} @change=${this.#onActiveChange}></uui-toggle>\r\n                </umb-property-layout>\r\n            </uui-box>\r\n\r\n            <uui-box headline=\"Provider Settings\">\r\n                <p class=\"placeholder-text\">\r\n                    Provider-specific settings will be displayed here once the provider is selected and saved. Future\r\n                    enhancement: Dynamic settings form based on provider's SettingDefinitions.\r\n                </p>\r\n            </uui-box>\r\n        `;\r\n    }\r\n\r\n    static styles = [\r\n        UmbTextStyles,\r\n        css`\r\n            :host {\r\n                display: block;\r\n                padding: var(--uui-size-layout-1);\r\n            }\r\n\r\n            uui-box {\r\n                margin-bottom: var(--uui-size-layout-1);\r\n            }\r\n\r\n            .placeholder-text {\r\n                color: var(--uui-color-text-alt);\r\n                font-style: italic;\r\n            }\r\n        `,\r\n    ];\r\n}\r\n\r\nexport default UaiConnectionDetailsElement;\r\n\r\ndeclare global {\r\n    interface HTMLElementTagNameMap {\r\n        \"uai-connection-details\": UaiConnectionDetailsElement;\r\n    }\r\n}\r\n"],"names":["UaiCommandBase","correlationId","UaiPartialUpdateCommand","#partial","partial","receiver","key","_workspaceContext","_UaiConnectionDetailsElement_instances","onProviderChange_fn","onActiveChange_fn","UaiConnectionDetailsElement","UmbLitElement","__privateAdd","UAI_CONNECTION_WORKSPACE_CONTEXT","context","__privateSet","model","isNew","html","__privateMethod","event","target","__privateGet","UmbTextStyles","css","__decorateClass","state","customElement","UaiConnectionDetailsElement_default"],"mappings":";;;;AAKO,MAAeA,EAAgD;AAAA,EAGlE,YAAYC,GAAwB;AAChC,SAAK,gBAAgBA;AAAA,EACzB;AAGJ;ACXO,MAAMC,UAA2CF,EAA0B;AAAA,EAC9EG;AAAA,EAEA,YAAYC,GAA6BH,GAAwB;AAC7D,UAAMA,CAAa,GACnB,KAAKE,KAAWC;AAAA,EACpB;AAAA,EAEA,QAAQC,GAAqB;AACzB,WAAO,KAAK,KAAKF,EAAQ,EACpB,OAAO,CAAAG,MAAO,KAAKH,GAASG,CAAsB,MAAM,MAAS,EACjE,QAAQ,CAAAA,MAAO;AACZ,MAAAD,EAASC,CAAsB,IAAI,KAAKH,GAASG,CAAsB;AAAA,IAC3E,CAAC;AAAA,EACT;AACJ;;;;;;;wXCjBAC,GAAAC,GAAAC,GAAAC;AAYO,IAAMC,IAAN,cAA0CC,EAAc;AAAA,EAS3D,cAAc;AACV,UAAA,GAVDC,EAAA,MAAAL,CAAA,GACHK,EAAA,MAAAN,CAAA,GAUI,KAAK,eAAeO,GAAkC,CAACC,MAAY;AAC/D,MAAIA,MACAC,EAAA,MAAKT,GAAoBQ,CAAA,GACzB,KAAK,QAAQA,EAAQ,OAAO,CAACE,MAAW,KAAK,SAASA,CAAM,GAC5D,KAAK,QAAQF,EAAQ,OAAO,CAACG,MAAW,KAAK,SAASA,CAAM;AAAA,IAEpE,CAAC;AAAA,EACL;AAAA,EAkBA,SAAS;AACL,WAAK,KAAK,SAEHC;AAAA;AAAA;AAAA;AAAA;AAAA,iCAKkB,KAAK,OAAO,UAAU;AAAA,kCACrBC,QAAKZ,GAAAC,CAAA,CAAiB;AAAA;AAAA,oCAEpB,CAAC,KAAK,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA,yDAKS,KAAK,OAAO,QAAQ,YAAYW,QAAKZ,GAAAE,CAAA,CAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAf5ES;AAAA,EA0B7B;AAoBJ;AAlFIZ,IAAA,oBAAA,QAAA;AADGC,IAAA,oBAAA,QAAA;AAoBHC,IAAiB,SAACY,GAAc;AAC5B,EAAAA,EAAM,gBAAA;AACN,QAAMC,IAASD,EAAM;AACrB,EAAAE,EAAA,MAAKhB,CAAA,GAAmB;AAAA,IACpB,IAAIL,EAAkD,EAAE,YAAYoB,EAAO,MAAA,GAAS,YAAY;AAAA,EAAA;AAExG;AAEAZ,IAAe,SAACW,GAAc;AAC1B,EAAAA,EAAM,gBAAA;AACN,QAAMC,IAASD,EAAM;AACrB,EAAAE,EAAA,MAAKhB,CAAA,GAAmB;AAAA,IACpB,IAAIL,EAAkD,EAAE,UAAUoB,EAAO,QAAA,GAAW,UAAU;AAAA,EAAA;AAEtG;AAlCSX,EAiEF,SAAS;AAAA,EACZa;AAAA,EACAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAeJ;AA9EQC,EAAA;AAAA,EADPC,EAAA;AAAM,GAHEhB,EAID,WAAA,UAAA,CAAA;AAGAe,EAAA;AAAA,EADPC,EAAA;AAAM,GANEhB,EAOD,WAAA,UAAA,CAAA;AAPCA,IAANe,EAAA;AAAA,EADNE,EAAc,wBAAwB;AAAA,GAC1BjB,CAAA;AAqFb,MAAAkB,IAAelB;;;;;;;"}